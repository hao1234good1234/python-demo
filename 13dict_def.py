"""
#  Python å­—å…¸ï¼ˆdictï¼‰å¸¸ç”¨å‡½æ•°ä¸æ–¹æ³•é€ŸæŸ¥æ‰‹å†Œ

> âœ… å­—å…¸æ˜¯ **é”®å€¼å¯¹ï¼ˆkey-valueï¼‰** çš„æ— åºï¼ˆPython 3.7+ æœ‰åºï¼‰å¯å˜å®¹å™¨  
> âœ… é”®å¿…é¡»æ˜¯ **ä¸å¯å˜ç±»å‹**ï¼ˆå¦‚ `str`, `int`, `tuple`ï¼‰  
> âœ… å€¼å¯ä»¥æ˜¯ **ä»»æ„ç±»å‹**
"""


# ğŸ“Œ ä¸€ã€åˆ›å»ºå­—å…¸
# | æ–¹æ³•                                | è¯´æ˜                                                         | ç¤ºä¾‹                                                         |
# | ----------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
# | `{}`                                | åˆ›å»ºç©ºå­—å…¸                                                   | `d = {}`                                                     |
# | `{'key': value, ...}`               | ç›´æ¥åˆå§‹åŒ–                                                   | `person = {"name": "å¼ ä¸‰", "age": 25}`                       |
# | `dict()`                            | æ„é€ å‡½æ•°                                                     | `d = dict(name="æå››", age=30)`                              |
# | `dict([(k, v), ...])`               | ä»é”®å€¼å¯¹åˆ—è¡¨åˆ›å»º                                             | `d = dict([("a", 1), ("b", 2)])`                             |
# | `dict(zip(keys, values))`           | ä»ä¸¤ä¸ªåˆ—è¡¨åˆå¹¶                                               | `d = dict(zip(['x','y'], [1,2]))`                            |
# | dict.fromkeys(iterable, value=None) | è¿™æ˜¯ä¸€ä¸ª**ç±»æ–¹æ³•**ï¼Œç”¨äº**æ‰¹é‡åˆ›å»ºå­—å…¸**ï¼Œæ‰€æœ‰é”®æ¥è‡ªä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œå¹¶ä¸”**æ‰€æœ‰é”®å¯¹åº”çš„å€¼éƒ½ç›¸åŒ**ï¼ˆé»˜è®¤ä¸º `None`ï¼‰ | keys = ['name', 'age', 'city']    æ¢è¡Œ d = dict.fromkeys(keys)    æ¢è¡Œ  d2 = dict.fromkeys(keys, 0) |

keys = ["name", "age", "city"]
d = dict.fromkeys(keys)
print(d)

# æŒ‡å®šé»˜è®¤å€¼
d2 = dict.fromkeys(keys, 0)
print(d2)



# ğŸ” äºŒã€è®¿é—®å€¼
# | æ–¹æ³•                  | è¯´æ˜                               | ç¤ºä¾‹                           |
# | --------------------- | ---------------------------------- | ------------------------------ |
# | `d[key]`              | é€šè¿‡é”®è·å–å€¼ï¼ˆ**é”®ä¸å­˜åœ¨ä¼šæŠ¥é”™**ï¼‰ | `name = user["name"]`          |
# | `d.get(key)`          | å®‰å…¨è·å–å€¼ï¼Œä¸å­˜åœ¨è¿”å› `None`      | `email = user.get("email")`    |
# | `d.get(key, default)` | æŒ‡å®šé»˜è®¤å€¼                         | `score = user.get("score", 0)` |

# > âœ… **æœ€ä½³å®è·µï¼šä¼˜å…ˆä½¿ç”¨ `.get()` é¿å… `KeyError`**

# âœï¸ ä¸‰ã€æ·»åŠ  / ä¿®æ”¹é”®å€¼å¯¹
# | æ–¹æ³•                                 | è¯´æ˜                                                         | ç¤ºä¾‹                                        |
# | ------------------------------------ | ------------------------------------------------------------ | ------------------------------------------- |
# | `d[key] = value`                     | æ·»åŠ æ–°é”®æˆ–ä¿®æ”¹å·²æœ‰é”®                                         | `user["city"] = "åŒ—äº¬"`                     |
# | `d.update(other_dict)`               | æ‰¹é‡æ›´æ–°ï¼ˆåˆå¹¶å­—å…¸ï¼‰                                         | `user.update({"age": 26, "job": "å·¥ç¨‹å¸ˆ"})` |
# | `d.update(key=value)`                | ç”¨å…³é”®å­—å‚æ•°æ›´æ–°                                             | `user.update(age=27)`                       |
# | `dict.setdefault(key, default=None)` | å¦‚æœ `key` **å­˜åœ¨**ï¼Œè¿”å›å®ƒçš„å€¼ï¼› å¦‚æœ `key` **ä¸å­˜åœ¨**ï¼Œåˆ™**æ’å…¥**è¿™ä¸ªé”®ï¼Œå¹¶æŠŠå€¼è®¾ä¸º `default`ï¼Œç„¶åè¿”å› `default`ã€‚ | city = d.setdefault('city', 'Beijing')      |

d = {"name": "å°æ˜"}
# keyå­˜åœ¨ï¼Œè¿”å›åŸå€¼
value = d.setdefault("name", "å°çº¢")
print(value)
print(d)

# keyä¸å­˜åœ¨ï¼Œæ’å…¥æ–°å€¼
value = d.setdefault("age", 20)
print(value)
print(d)

# å¸¸è§ç”¨é€”ï¼šåˆ†ç»„ç»Ÿè®¡ï¼ˆæ¯”å¦‚æŒ‰ç±»åˆ«æ”¶é›†æ•°æ®ï¼‰
data = [("fruit", "apple"), ("fruit", "banana"), ("vegetable", "carrot")]
groups = {}
for category, item in data:
    groups.setdefault(category, []).append(item) # ç­‰ä»·äº groups[category] = groups.get(category, []) + [item]
print(groups)



# > ğŸ”¸ `update()` ä¸ä¼šåˆ é™¤åŸæœ‰é”®ï¼Œåªä¼šæ–°å¢æˆ–è¦†ç›–ã€‚

# â– å››ã€åˆ é™¤é”®å€¼å¯¹
# | æ–¹æ³•                  | è¯´æ˜                                        | ç¤ºä¾‹                       |
# | --------------------- | ------------------------------------------- | -------------------------- |
# | `del d[key]`          | åˆ é™¤æŒ‡å®šé”®ï¼ˆ**é”®ä¸å­˜åœ¨æŠ¥é”™**ï¼‰              | `del user["age"]`          |
# | `d.pop(key)`          | åˆ é™¤å¹¶è¿”å›å€¼ï¼ˆ**é”®ä¸å­˜åœ¨æŠ¥é”™**ï¼‰            | `age = user.pop("age")`    |
# | `d.pop(key, default)` | å®‰å…¨åˆ é™¤ï¼ŒæŒ‡å®šé»˜è®¤è¿”å›å€¼                    | `age = user.pop("age", 0)` |
# | `d.popitem()`         | åˆ é™¤å¹¶è¿”å›**æœ€åä¸€ä¸ª**é”®å€¼å¯¹ï¼ˆPython 3.7+ï¼‰ | `last = user.popitem()`    |
# | `d.clear()`           | æ¸…ç©ºæ•´ä¸ªå­—å…¸                                | `user.clear()`             |

# > âœ… æ¨èç”¨ `.pop(key, default)` å®‰å…¨åˆ é™¤ï¼

# ğŸ” äº”ã€æ£€æŸ¥é”®/å€¼æ˜¯å¦å­˜åœ¨
# | è¡¨è¾¾å¼                | è¯´æ˜                         | ç¤ºä¾‹                      |
# | --------------------- | ---------------------------- | ------------------------- |
# | `key in d`            | æ£€æŸ¥**é”®**æ˜¯å¦å­˜åœ¨ï¼ˆâœ… æ¨èï¼‰ | `"name" in user`          |
# | `key not in d`        | æ£€æŸ¥é”®ä¸å­˜åœ¨                 | `"email" not in user`     |
# | `value in d.values()` | æ£€æŸ¥**å€¼**æ˜¯å¦å­˜åœ¨ï¼ˆè¾ƒæ…¢ï¼‰   | `"å¼ ä¸‰" in user.values()` |
# âš ï¸ **ä¸è¦ç”¨ `d.get(key)` åˆ¤æ–­å­˜åœ¨æ€§**ï¼  
# åŸå› ï¼šå¦‚æœå€¼æ˜¯ `0`ã€`False`ã€`""`ï¼Œä¼šè¢«è¯¯åˆ¤ä¸ºâ€œä¸å­˜åœ¨â€ã€‚

# ğŸ“Š å…­ã€è·å–é”®ã€å€¼ã€é”®å€¼å¯¹
## å…­ã€è·å–é”®ã€å€¼ã€é”®å€¼å¯¹

# | æ–¹æ³•         | è¿”å›ç±»å‹      | è¯´æ˜                   | ç¤ºä¾‹                            |
# | ------------ | ------------- | ---------------------- | ------------------------------- |
# | `d.keys()`   | `dict_keys`   | æ‰€æœ‰é”®çš„åŠ¨æ€è§†å›¾       | `list(user.keys())`             |
# | `d.values()` | `dict_values` | æ‰€æœ‰å€¼çš„åŠ¨æ€è§†å›¾       | `list(user.values())`           |
# | `d.items()`  | `dict_items`  | æ‰€æœ‰ `(key, value)` å¯¹ | `for k, v in user.items(): ...` |

# dict.keys()ã€dict.values()ã€dict.items() è¿”å›çš„æ˜¯åŠ¨æ€è§†å›¾å¯¹è±¡ï¼Œä¸æ˜¯åˆ—è¡¨ã€‚å¦‚æœéœ€è¦åˆ—è¡¨ï¼Œå¯ä½¿ç”¨ list(dict.keys())ã€‚

# âœ… éå†å­—å…¸ï¼ˆæœ€å¸¸ç”¨ï¼‰ï¼š
# for key, value in user.items():
#     print(f"{key}: {value}")
# ğŸ”¸ è¿™äº›è§†å›¾æ˜¯**åŠ¨æ€çš„**ï¼šå­—å…¸å˜äº†ï¼Œè§†å›¾ä¹Ÿå˜ï¼

# ğŸ“ ä¸ƒã€å…¶ä»–å®ç”¨å‡½æ•°ï¼ˆå…¨å±€å‡½æ•°ï¼‰
# | å‡½æ•°      | è¯´æ˜                                  | ç¤ºä¾‹                      |
# | --------- | ------------------------------------- | ------------------------- |
# | `len(d)`  | è·å–é”®å€¼å¯¹æ•°é‡                        | `len({"a":1, "b":2}) â†’ 2` |
# | `dict()`  | è½¬æ¢æˆ–åˆ›å»ºå­—å…¸                        | `dict(a=1, b=2)`          |
# | `list(d)` | è·å–æ‰€æœ‰é”®ï¼ˆç­‰ä»·äº `list(d.keys())`ï¼‰ | `list({"x":1}) â†’ ['x']`   |

# ğŸ”„ å…«ã€å­—å…¸åˆå¹¶ï¼ˆPython 3.9+ï¼‰

# | æ“ä½œ       | è¯´æ˜                                    | ç¤ºä¾‹                                 |
# | ---------- | --------------------------------------- | ------------------------------------ |
# | `d1 | d2`  | åˆå¹¶ä¸¤ä¸ªå­—å…¸ï¼ˆè¿”å›æ–°å­—å…¸ï¼‰              | `{"a":1} | {"b":2} â†’ {"a":1, "b":2}` |
# | `d1 |= d2` | åŸåœ°æ›´æ–° `d1`ï¼ˆç­‰ä»·äº `d1.update(d2)`ï¼‰ | `d1 |= {"c":3}`                      |

# å…¼å®¹æ—§ç‰ˆæœ¬çš„åˆå¹¶æ–¹å¼ï¼š
d1 = {"a": 1}
d2 = {"b": 2}

# Python 3.5+
merged = {**d1, **d2}

# é€šç”¨æ–¹æ³•
merged = d1.copy()
merged.update(d2)

# ğŸ§© ä¹ã€å­—å…¸æ¨å¯¼å¼ï¼ˆDict Comprehensionï¼‰
# | è¯­æ³•                                   | è¯´æ˜                                                         | ç¤ºä¾‹                                                         |
# | -------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
# | `{k: v for ...}`                       | ä»å¯è¿­ä»£å¯¹è±¡æ„å»ºå­—å…¸                                         | `{x: x**2 for x in range(3)}` â†’ `{0:0, 1:1, 2:4}`            |
# | `{k: v for ... if ...}`                | å¸¦æ¡ä»¶è¿‡æ»¤                                                   | `{k: v for k, v in d.items() if v > 0}`                      |
# | `{k: v for k, v in zip(keys, values)}` | è¿™æ˜¯ä¸€ç§**ç®€æ´ã€é«˜æ•ˆ**åœ°ä»ä¸¤ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚ä¸¤ä¸ªåˆ—è¡¨ï¼‰æ„å»ºå­—å…¸çš„æ–¹å¼ï¼Œ`zip(keys, values)` æŠŠä¸¤ä¸ªåˆ—è¡¨â€œé…å¯¹â€æˆå…ƒç»„åºåˆ—ï¼› ç­‰ä»·å†™æ³•ï¼ˆä½¿ç”¨ `dict()` + `zip()`ï¼‰ | keys = ['a', 'b', 'c'] values = [1, 2, 3]  d = {k: v for k, v in zip(keys, values)} |

# åè½¬å­—å…¸ï¼ˆé”®å€¼äº’æ¢ï¼‰
original = {"a": 1, "b": 2}
reversed_d = {v: k for k, v in original.items()}  # {1: 'a', 2: 'b'}

keys = ["a", "b", "c"]
values = [1, 2, 3]
d = {k: v for k, v in zip(keys, values)}
print(d)  # {'a': 1, 'b': 2, 'c': 3}
d = dict(zip(keys, values))
print(d)
# ğŸŒŸ ä½†å­—å…¸æ¨å¯¼å¼çš„çœŸæ­£ä¼˜åŠ¿åœ¨äºå¯ä»¥åŠ æ¡ä»¶æˆ–è½¬æ¢ï¼š
# åªä¿ç•™å¤§äº0 çš„é¡¹
keys = ["a", "b", "c"]
values = [1, -2, 3]
d = {k: v for k, v in zip(keys,values) if v > 0}
print(d)

# é”®è½¬å¤§å†™ï¼Œå€¼å¹³æ–¹
d2 = {k.upper(): v ** 2 for k, v in zip(keys, values)}
print(d2)


# ğŸ§ª åã€å®æˆ˜æŠ€å·§ & æœ€ä½³å®è·µ
# 1. **å®‰å…¨åˆå§‹åŒ–åµŒå¥—å­—å…¸**
# âŒ å®¹æ˜“å‡ºé”™
# data = {}
# data["user"]["name"] = "zhangsan"

# âœ… ç”¨ defaultdictï¼ˆéœ€å¯¼å…¥ï¼‰
from collections import defaultdict
data = defaultdict(dict)
data["user"]["name"] = "zhangsan"
data["user"]["age"] = 18
print(data)

# âœ… æˆ–æ‰‹åŠ¨åˆå§‹åŒ–
data = {}
data.setdefault("user", {})["name"] = "lisi"
data.setdefault("user", {})["age"] = 20
print(data)

# 2. **ç»Ÿè®¡é¢‘ç‡ï¼ˆç»å…¸ç”¨æ³•ï¼‰**
text = "hello world"
freq = {}
for char in text:
    freq[char] = freq.get(char, 0) + 1
print(freq) 

# 3. **å­—å…¸ä½œä¸ºå‡½æ•°è¿”å›å€¼**
def get_user_info(uid):
    return {
        "id": uid,
        "name": "ç”¨æˆ·" + str(uid),
        "status": "active"
    }
user = get_user_info(29)
print(user)


# åä¸€ã€å¸¸è§é”™è¯¯ & æ³¨æ„äº‹é¡¹
# | é—®é¢˜                       | åŸå›              | è§£å†³æ–¹æ¡ˆ                                              |
# | -------------------------- | ---------------- | ----------------------------------------------------- |
# | `KeyError`                 | è®¿é—®ä¸å­˜åœ¨çš„é”®   | ç”¨ `.get(key, default)`                               |
# | é”®æ˜¯åˆ—è¡¨/å­—å…¸              | é”®å¿…é¡»ä¸å¯å˜     | æ”¹ç”¨å…ƒç»„æˆ–å­—ç¬¦ä¸²                                      |
# | éå†æ—¶ä¿®æ”¹å­—å…¸             | RuntimeError     | éå† `list(d.keys())` å‰¯æœ¬                            |
# | è¯¯ä»¥ä¸ºæ—§ç‰ˆ Python å­—å…¸æœ‰åº | Python <3.7 æ— åº | å¦‚éœ€æœ‰åºï¼Œç”¨ `collections.OrderedDict`ï¼ˆPython <3.7ï¼‰ |

# âœ… **Python 3.7+ å­—å…¸é»˜è®¤ä¿æŒæ’å…¥é¡ºåºï¼**

# ğŸ“‹ åäºŒã€é€ŸæŸ¥è¡¨ï¼ˆå»ºè®®æ”¶è—ï¼‰
# | æ“ä½œ           | æ¨èæ–¹æ³•                                  |
# | -------------- | ----------------------------------------- |
# | **å®‰å…¨å–å€¼**   | `.get(key, default)`                      |
# | **åˆ¤æ–­é”®å­˜åœ¨** | `key in dict`                             |
# | **éå†é”®å€¼å¯¹** | `for k, v in dict.items():`               |
# | **æ·»åŠ /ä¿®æ”¹**  | `dict[key] = value`                       |
# | **æ‰¹é‡æ›´æ–°**   | `dict.update(other)`                      |
# | **å®‰å…¨åˆ é™¤**   | `.pop(key, default)`                      |
# | **åˆå¹¶å­—å…¸**   | `d1 | d2`ï¼ˆPython 3.9+ï¼‰æˆ– `{**d1, **d2}` |
# | **æ¸…ç©ºå­—å…¸**   | `.clear()`                                |

# âœ… åä¸‰ã€ç»¼åˆç»ƒä¹ 
# 1. åˆå¹¶ä¸¤ä¸ªå­—å…¸ï¼Œd2 ä¼˜å…ˆ
d1 = {"a": 1, "b": 2}
d2 = {"b": 3, "c": 4}
result = d1 | d2  # Python 3.9+
# result = {**d1, **d2}  # å…¼å®¹å†™æ³•
print(result)

# 2.æ‰¾å‡ºå€¼æœ€å¤§çš„é”®
scores = {"Alice": 92, "Bob": 85, "Charlie": 96}
top_student  = max(scores, key=scores.get) 
print(top_student)

# 3. è¿‡æ»¤å­—å…¸ï¼ˆåªä¿ç•™å€¼å¤§äº 0 çš„ï¼‰
data = {"x": -1, "y": 2, "z": 0}
positive = {k: v for k, v in data.items() if v > 0}
print(positive)
