"""
é›†åˆï¼ˆsetï¼‰ â†’ å»é‡ã€äº¤é›†ã€å¹¶é›†ã€å·®é›†
"""
# ç‰¹ç‚¹ï¼š
# - **å…ƒç´ å”¯ä¸€**ï¼ˆè‡ªåŠ¨å»é‡ï¼‰
# - **æ— åº**ï¼ˆä¸èƒ½ç´¢å¼•ï¼‰
# - **æ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰è¿ç®—**

# ä¸€ã€ä»€ä¹ˆæ˜¯é›†åˆï¼ˆsetï¼‰ï¼Ÿ
# - **æ— åº**ï¼šå…ƒç´ æ²¡æœ‰å›ºå®šé¡ºåºï¼ˆä¸èƒ½ç”¨ `s[0]` è®¿é—®ï¼‰
# - **å”¯ä¸€**ï¼šè‡ªåŠ¨å»é™¤é‡å¤å…ƒç´ 
# - **å¯å˜**ï¼šå¯ä»¥æ·»åŠ /åˆ é™¤å…ƒç´ ï¼ˆä½†å…ƒç´ æœ¬èº«å¿…é¡»**ä¸å¯å˜**ï¼‰
# - **å…ƒç´ å¿…é¡»æ˜¯å¯å“ˆå¸Œçš„**ï¼ˆå¦‚ `int`, `str`, `tuple`ï¼Œä¸èƒ½æ˜¯ `list`/`dict`ï¼‰
# âœ… **å…¸å‹ç”¨é€”**ï¼š
# - å»é‡ï¼ˆå¦‚ä»åˆ—è¡¨ä¸­å»é™¤é‡å¤é¡¹ï¼‰
# - å¿«é€Ÿæˆå‘˜åˆ¤æ–­ï¼ˆæ¯”åˆ—è¡¨å¿«å¾—å¤šï¼ï¼‰
# - æ•°å­¦é›†åˆè¿ç®—ï¼šäº¤é›†ã€å¹¶é›†ã€å·®é›†ã€å¯¹ç§°å·®é›†

#  äºŒã€åˆ›å»ºé›†åˆ
# 1. åŸºæœ¬è¯­æ³•ï¼š**èŠ±æ‹¬å· `{}`ï¼ˆä½†ä¸èƒ½ç©ºï¼ï¼‰**
# âŒ ç©ºèŠ±æ‹¬å·æ˜¯å­—å…¸ï¼
empty_dict = {}  # è¿™æ˜¯ dictï¼
# åˆ›å»ºç©ºé›†åˆ
empty_set = set()
# åˆ›å»ºéç©ºé›†åˆ
fruits = {"apple", "banana", "cherry"}
numbers = {1, 2, 3, 2, 1}  # è‡ªåŠ¨å»é‡
print(numbers)  # {1, 2, 3}

# 2. ç”¨ `set()` æ„é€ å‡½æ•°ï¼ˆæ¨èç”¨äºå»é‡ï¼‰
# ä»åˆ—è¡¨å»é‡
lst = [1, 2, 2, 3, 3, 3]
unique = set(lst)
print(unique)  # {1, 2, 3}

# ä»å­—ç¬¦ä¸²å»é‡
letters = set("hello")
print(letters)  # {'h', 'e', 'l', 'o'}

# ä»å…ƒç»„å»é‡
tup = (1, 2, 2, 3, 3, 3)
unique = set(tup)
print(unique)  # {1, 2, 3}

# âš ï¸ **æ³¨æ„**ï¼š

# - `{}` æ˜¯ç©ºå­—å…¸ï¼Œ**ä¸æ˜¯ç©ºé›†åˆ**ï¼
# - ç©ºé›†åˆå¿…é¡»å†™æˆ `set()`

#  ä¸‰ã€é›†åˆçš„åŸºæœ¬æ“ä½œ
# 1. æ·»åŠ å…ƒç´ 
s = {1, 2}
s.add(3)  # æ·»åŠ å…ƒç´  3
s.add(2)  # é‡å¤å…ƒç´ ä¼šè¢«å¿½ç•¥
print(s)  # {1, 2, 3}

# 2. åˆ é™¤å…ƒç´ 
# | æ–¹æ³•           | è¯´æ˜                               | ç¤ºä¾‹           |
# | -------------- | ---------------------------------- | -------------- |
# | `s.remove(x)`  | åˆ é™¤å…ƒç´ ï¼ˆä¸å­˜åœ¨ä¼šæŠ¥é”™ï¼‰           | `s.remove(2)`  |
# | `s.discard(x)` | å®‰å…¨åˆ é™¤ï¼ˆä¸å­˜åœ¨ä¹Ÿä¸æŠ¥é”™ï¼‰         | `s.discard(5)` |
# | `s.pop()`      | éšæœºåˆ é™¤å¹¶è¿”å›ä¸€ä¸ªå…ƒç´ ï¼ˆå› ä¸ºæ— åºï¼‰ | `x = s.pop()`  |
# | `s.clear()`    | æ¸…ç©ºé›†åˆ                           | `s.clear()`    |
s = {1, 2, 3}
s.discard(4)  # ä¸å­˜åœ¨ä¸ä¼šæŠ¥é”™
# s.remove(5)  # ä¸å­˜åœ¨ä¼šæŠ¥é”™

# ğŸ” å››ã€æˆå‘˜åˆ¤æ–­ï¼ˆè¶…å¿«ï¼ï¼‰
fruits = {"apple", "banana", "cherry"}
if "apple" in fruits:
    print("æœ‰è‹¹æœ")  # æœ‰è‹¹æœ O(1) å¹³å‡æ—¶é—´å¤æ‚åº¦

# æ¯”åˆ—è¡¨å¿«å¾—å¤š
# lst = ["apple", "banana", ...] â†’ "apple" in lst æ˜¯ O(n)
# âœ… **é›†åˆçš„æˆå‘˜åˆ¤æ–­æ˜¯å¸¸æ•°æ—¶é—´ O(1)**ï¼Œé€‚åˆå¤§é‡æ•°æ®å»é‡å’ŒæŸ¥æ‰¾ï¼

# ğŸ§® äº”ã€é›†åˆçš„æ•°å­¦è¿ç®—ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼ï¼‰
# å‡è®¾æœ‰ä¸¤ä¸ªé›†åˆï¼š
# A = {1, 2, 3, 4}
# B = {3, 4, 5, 6}

# | è¿ç®—         | å«ä¹‰                     | è¿ç®—ç¬¦   | æ–¹æ³•                        | ç»“æœ                 |
# | ------------ | ------------------------ | -------- | --------------------------- | -------------------- |
# | **äº¤é›†**     | åŒæ—¶åœ¨ A å’Œ B ä¸­         | `A & B`  | `A.intersection(B)`         | `{3, 4}`             |
# | **å¹¶é›†**     | åœ¨ A æˆ– B ä¸­             | `A \| B` | `A.union(B)`                | `{1, 2, 3, 4, 5, 6}` |
# | **å·®é›†**     | åœ¨ A ä½†ä¸åœ¨ B ä¸­         | `A - B`  | `A.difference(B)`           | `{1, 2}`             |
# | **å¯¹ç§°å·®é›†** | åœ¨ A æˆ– B ä¸­ï¼Œä½†ä¸åŒæ—¶åœ¨ | `A ^ B`  | `A.symmetric_difference(B)` | `{1, 2, 5, 6}`       |

A = {1, 2, 3, 4}
B = {3, 4, 5, 6}
print(A & B)  # {3, 4}
print(A | B)  # {1, 2, 3, 4, 5, 6}
print(A - B)  # {1, 2}
print(A ^ B)  # {1, 2, 5, 6}

# ğŸ”„ å…­ã€é›†åˆçš„æ›´æ–°æ“ä½œï¼ˆåŸåœ°ä¿®æ”¹ï¼‰

# | æ–¹æ³•                               | è¯´æ˜       | ç­‰ä»·è¿ç®— |
# | ---------------------------------- | ---------- | -------- |
# | `A.update(B)`                      | A = A \| B | `A |= B` |
# | `A.intersection_update(B)`         | A = A & B  | `A &= B` |
# | `A.difference_update(B)`           | A = A - B  | `A -= B` |
# | `A.symmetric_difference_update(B)` | A = A ^ B  | `A ^= B` |

A = {1, 2, 3}
B = {3, 4}
A.update(B)  # A = A | B , A = {1, 2, 3, 4}
A.intersection_update(B)  # A = A & B , A = {3}
A.difference_update(B)  # A = A - B , A = {1, 2}
A.symmetric_difference_update(B)  # A = A ^ B , A = {1, 2, 4}

#  ä¸ƒã€é›†åˆçš„å…¶ä»–æ–¹æ³•
# | æ–¹æ³•                  | è¯´æ˜           | ç¤ºä¾‹                               |
# | --------------------- | -------------- | ---------------------------------- |
# | `len(s)`              | å…ƒç´ ä¸ªæ•°       | `len({1,2,3}) â†’ 3`                 |
# | `s.copy()`            | æµ…æ‹·è´         | `new_set = s.copy()`               |
# | `s.isdisjoint(other)` | æ˜¯å¦**æ— äº¤é›†** | `{1,2}.isdisjoint({3,4}) â†’ True`   |
# | `s.issubset(other)`   | æ˜¯å¦æ˜¯å­é›†     | `{1,2}.issubset({1,2,3}) â†’ True`   |
# | `s.issuperset(other)` | æ˜¯å¦æ˜¯è¶…é›†     | `{1,2,3}.issuperset({1,2}) â†’ True` |
s = {1, 2, 3}
print(len(s))
p = s.copy()
print(p)
required_skills = {"Python", "Sql"}
candidate_skills = {"Python", "Sql", "Flask"}
if required_skills.issubset(candidate_skills):
    print("æ»¡è¶³è¦æ±‚")

print("æ˜¯å¦æ— äº¤é›†", required_skills.isdisjoint(candidate_skills))
print("æ˜¯å¦æ˜¯å­é›†", required_skills.issubset(candidate_skills))
print("æ˜¯å¦æ˜¯è¶…é›†", required_skills.issuperset(candidate_skills))

# ğŸ® å…«ã€å®æˆ˜åœºæ™¯
# åœºæ™¯ 1ï¼šåˆ—è¡¨å»é‡ï¼ˆæœ€å¸¸ç”¨ï¼ï¼‰
data = [1, 2, 2, 3, 3, 4]
unique_data = set(data)  # [1, 2, 3, 4]ï¼ˆé¡ºåºå¯èƒ½å˜ï¼ï¼‰
print(unique_data)

# å¦‚æœéœ€è¦ä¿æŒé¡ºåºï¼ˆPython 3.7+ï¼‰
unique_data = list(dict.fromkeys(data))  # [1, 2, 3, 4] 
print(unique_data)
# åœºæ™¯ 2ï¼šæ‰¾å…±åŒå¥½å‹
user1_friends = {"Alice", "Bob", "Charlie"}
user2_friends = {"Bob", "David", "Eve"}
common = user1_friends & user2_friends
print(common)  # {'Bob'}

# åœºæ™¯ 3ï¼šæƒé™æ£€æŸ¥
user_roles = {"admin", "editor"}
required_roles = {"admin", "viewer"}
if required_roles & user_roles:
    print("æœ‰æƒé™è®¿é—®")

# ä¹ã€æ³¨æ„äº‹é¡¹ & å¸¸è§è¯¯åŒº
# | è¯¯åŒº               | æ­£ç¡®ç†è§£                                               |
# | ------------------ | ------------------------------------------------------ |
# | â€œé›†åˆæœ‰åºâ€         | âŒ é›†åˆ**æ— åº**ï¼ˆä¸èƒ½ç´¢å¼•ã€åˆ‡ç‰‡ï¼‰                       |
# | `{}` æ˜¯ç©ºé›†åˆ      | âŒ `{}` æ˜¯ç©ºå­—å…¸ï¼Œç©ºé›†åˆæ˜¯ `set()`                      |
# | é›†åˆå…ƒç´ å¯ä»¥æ˜¯åˆ—è¡¨ | âŒ å…ƒç´ å¿…é¡»**ä¸å¯å˜**ï¼ˆä¸èƒ½æ˜¯ list/dictï¼‰               |
# | å»é‡åé¡ºåºä¸å˜     | âŒ `set()` ä¼šæ‰“ä¹±é¡ºåºï¼ˆå¦‚éœ€ä¿åºï¼Œç”¨ `dict.fromkeys()`ï¼‰ |

# âŒ é”™è¯¯ï¼šåˆ—è¡¨ä¸å¯å“ˆå¸Œ
# s = {[1, 2], [3, 4]}  # TypeError!

# âœ… æ­£ç¡®ï¼šç”¨å…ƒç»„
s = {(1, 2), (3, 4)}

# âœ… åã€åŠ¨æ‰‹ç»ƒä¹ 
# ç»ƒä¹ 1 å»é‡
nums = {1, 2, 2, 3, 4, 4, 5}
uinque_nums = set(nums)
print(uinque_nums)  # {1, 2, 3, 4, 5}

# ç»ƒä¹ 2 äº¤é›†
A = {1, 2, 3}
B = {3, 4}
print(A & B)

# ç»ƒä¹ 3 å­é›†åˆ¤æ–­
allowed = {"read", "write"}
user_perms = {"read"}
if user_perms.issubset(allowed):
    print("æƒé™åˆæ³•")

#  åä¸€ã€é›†åˆ vs å…¶ä»–æ•°æ®ç»“æ„
# | ç‰¹æ€§         | é›†åˆï¼ˆsetï¼‰    | åˆ—è¡¨ï¼ˆlistï¼‰ | å…ƒç»„ï¼ˆtupleï¼‰ | å­—å…¸ï¼ˆdictï¼‰          |
# | ------------ | -------------- | ------------ | ------------- | --------------------- |
# | **æ˜¯å¦æœ‰åº** | âŒ æ— åº         | âœ… æœ‰åº       | âœ… æœ‰åº        | âœ… æœ‰åºï¼ˆPython 3.7+ï¼‰ |
# | **æ˜¯å¦å”¯ä¸€** | âœ… å”¯ä¸€         | âŒ å¯é‡å¤     | âŒ å¯é‡å¤      | âœ… é”®å”¯ä¸€              |
# | **æ˜¯å¦å¯å˜** | âœ… å¯å˜         | âœ… å¯å˜       | âŒ ä¸å¯å˜      | âœ… å¯å˜                |
# | **ä¸»è¦ç”¨é€”** | å»é‡ã€é›†åˆè¿ç®— | åŠ¨æ€åºåˆ—     | å›ºå®šè®°å½•      | é”®å€¼æ˜ å°„              |


# åäºŒã€  é›†åˆçš„â€œå»¶ä¼¸çŸ¥è¯†â€ï¼ˆè¿›é˜¶ä½†éå¿…éœ€ï¼‰
# 1. **ä¸å¯å˜é›†åˆï¼š`frozenset`**
# ç±»ä¼¼å…ƒç»„ä¹‹äºåˆ—è¡¨ï¼Œ`frozenset` æ˜¯**ä¸å¯å˜ç‰ˆæœ¬çš„ set**ï¼Œå¯ä½œä¸ºå­—å…¸çš„é”®æˆ–é›†åˆçš„å…ƒç´ ã€‚
# æ™®é€š set ä¸èƒ½åšå­—å…¸é”®
# d = {{1, 2}: "value"}  # âŒ TypeError

# frozenset å¯ä»¥ï¼
fs = frozenset([1, 2, 3])
# fs = frozenset({1, 2, 3})
d = {fs: "a set as key"}
print(d)  # {frozenset({1, 2, 3}): 'a set as key'}

# frozenset ä¹Ÿæ”¯æŒé›†åˆè¿ç®—
A = frozenset([1, 2])
B = frozenset([2, 3])
print(A & B)  # frozenset({2})
# âœ… ç”¨é€”ï¼š  
# - éœ€è¦â€œé›†åˆçš„é›†åˆâ€æ—¶ï¼ˆå¦‚åˆ†ç±»æ ‡ç­¾ç»„åˆï¼‰  
# - ä½œä¸ºç¼“å­˜é”®ï¼ˆå¦‚å‡½æ•°å‚æ•°æ˜¯é›†åˆæ—¶ï¼‰